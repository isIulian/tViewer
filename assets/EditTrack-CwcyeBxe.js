import{r as l,w as h,k as e,B as x,L as j,p,q as f}from"./index-BqNX3fUW.js";import{z as n,u as S,F as k,b as g,c as F,d as b,e as T,g as w,f as y,t as N}from"./form-YsUovLLL.js";import{S as P,a as v,b as E,c as I,d as L}from"./select-Ck-MZYYx.js";import{r as C}from"./resourcesService-BFqxfeSL.js";import{t as i}from"./trackService-CRxGPZl4.js";import{T as D}from"./theme-switch-Dv3xt-Vd.js";const R=n.object({lastReadedPart:n.string({required_error:"Please select the last readed resource part."})});function B(){const[a,d]=l.useState(null),{id:c}=h();l.useEffect(()=>{(async()=>{let r=parseInt(c,10);if(!isNaN(r)){let s=await i.getTrack(r),u=await C.getResource(s.resourceId);s.resourceParts=u.parts,d(s)}})()},[c]);const o=S({resolver:N(R),mode:"onChange"});function m(t){let r=parseInt(c,10);t.id=r,i.updateTrack(t).then(function(){window.location.href="/tracks"})}return a===null?e.jsx("p",{children:"No details to edit"}):e.jsx(k,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(m),className:"space-y-8",children:[a!==null&&a.resourceParts.length>0?e.jsx(g,{control:o.control,name:"lastReadedPart",render:({field:t})=>e.jsxs(F,{children:[e.jsx(b,{children:"Last readed"}),e.jsxs(P,{onValueChange:t.onChange,value:t.value,defaultValue:a.lastReadedPart,children:[e.jsx(T,{children:e.jsx(v,{children:e.jsx(E,{placeholder:"Select part"})})}),e.jsx(I,{children:a.resourceParts.map((r,s)=>e.jsx(L,{value:r,children:r},s))})]}),e.jsx(w,{children:"Select what was the last readed part"}),e.jsx(y,{})]})}):e.jsx(e.Fragment,{}),e.jsx(x,{type:"submit",children:"Edit"})]})})}function A(){return e.jsxs(j,{children:[e.jsxs(p,{className:"border-b",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Edit track"}),e.jsx("div",{className:"ml-auto flex items-center space-x-4",children:e.jsx(D,{})})]}),e.jsx(f,{className:"space-y-4",children:e.jsx(B,{})})]})}export{A as default};
