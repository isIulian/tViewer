import{t as w,c as Q,k as e,s as q,r,l as o,u as B,C as G,v as H,w as D,L as V,p as $,q as A,x as J}from"./index-DCuvSdG9.js";import{r as K}from"./resourcesService-D34CI1IK.js";import{I as O}from"./input-CQy6efKI.js";import{r as U}from"./resourceTypeService-1n25Cmam.js";import{T as W}from"./theme-switch-Cw7zMvav.js";/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=w("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=w("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license @tabler/icons-react v3.2.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z=Q("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);function _(s){let a=s.info;return e.jsx(e.Fragment,{children:e.jsx("p",{className:"truncate tracking-wid font-bold",children:a.name})})}function ee({resource:s}){return e.jsxs(e.Fragment,{children:[e.jsx(q,{to:`/resource/${s.id}`,className:"select-none xs:h-[250px] h-[216px] overflow-hidden",children:e.jsx("img",{src:s.fallbackCovers[0],alt:s.title,className:"object-cover h-full w-full rounded-lg transition-all duration-300 ease-in-out hover:scale-110"})}),e.jsx("div",{className:"grid gap-1",children:e.jsx(_,{info:s})})]})}const se=({setQuery:s})=>{const[a,t]=r.useState(""),x=d=>{d.preventDefault(),a&&s({search:a})};return e.jsxs("form",{className:"text-[14px] flex flex-row items-center justify-center",onSubmit:x,children:[e.jsx(O,{type:"search",onChange:d=>t(d.target.value),placeholder:"Search...",value:a,className:"md:w-[100px] lg:w-[300px]"}),e.jsx("button",{type:"submit",className:"-ml-[32px] z-[1]",children:e.jsx(Z,{})})]})},b=({className:s,...a})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:o("mx-auto flex w-full justify-center",s),...a});b.displayName="Pagination";const k=r.forwardRef(({className:s,...a},t)=>e.jsx("ul",{ref:t,className:o("flex flex-row items-center gap-1",s),...a}));k.displayName="PaginationContent";const h=r.forwardRef(({className:s,...a},t)=>e.jsx("li",{ref:t,className:o("",s),...a}));h.displayName="PaginationItem";const f=({className:s,isActive:a,size:t="icon",...x})=>e.jsx("a",{"aria-current":a?"page":void 0,className:o(B({variant:a?"outline":"ghost",size:t}),s),...x});f.displayName="PaginationLink";const C=({className:s,...a})=>e.jsxs(f,{"aria-label":"Go to previous page",size:"default",className:o("gap-1 pl-2.5",s),...a,children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});C.displayName="PaginationPrevious";const R=({className:s,...a})=>e.jsxs(f,{"aria-label":"Go to next page",size:"default",className:o("gap-1 pr-2.5",s),...a,children:[e.jsx("span",{children:"Next"}),e.jsx(G,{className:"h-4 w-4"})]});R.displayName="PaginationNext";const S=({className:s,...a})=>e.jsxs("span",{"aria-hidden":!0,className:o("flex h-9 w-9 items-center justify-center",s),...a,children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]});S.displayName="PaginationEllipsis";const le=()=>{const[s,a]=r.useState([]),[t,x]=r.useState([]),[d,g]=H(),{type:j="movie"}=D(),u=d.get("search")||"",c=parseInt(d.get("page"),10)||1,L=()=>{g({page:c+1})},I=()=>{c>1&&g({page:c-1})};return r.useEffect(()=>{g({page:1,search:u})},[u]),r.useEffect(()=>{(async()=>{let E=await U.getTypeByName(j),y=await K.getPagedResources(E.id,u,c);const p=y.totalPages;if(p>1){const N=c,v=1;let z=N-v,F=N+v,l=[],M=J(1,p);for(const n of M)(p<6||n===1||n===p||n>=z&&n<=F)&&l.push(n);if(p>=6){let n=[];for(let m=0;m<l.length;m++){let P=l[m];n.push(P),m+1<l.length&&l[m+1]!==P+1&&n.push(-1)}l=n}a(l)}else a([]);let T=y.items;x([...T])})()},[c,u,j]),e.jsxs(V,{children:[e.jsx($,{className:"border-b",children:e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(se,{setQuery:g}),e.jsx(W,{})]})}),e.jsxs(A,{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between space-y-2",children:e.jsx("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:j})}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:t==null?void 0:t.map(i=>e.jsx("div",{className:"flex flex-col xs:gap-4 gap-2 rounded-lg lg:mb-6 md:mb-5 sm:mb-4 mb-[10px]",children:e.jsx(ee,{resource:i})},i.id))}),s.length>0?e.jsx(b,{className:"pt-8",children:e.jsxs(k,{children:[e.jsx(h,{children:e.jsx(C,{onClick:I,disabled:c===1})}),s.map(i=>i===-1?e.jsx(h,{className:"hidden md:block",children:e.jsx(S,{})}):e.jsx(h,{children:e.jsx(f,{href:"#",onClick:()=>g({page:i}),isActive:i===c,children:i})},i)),e.jsx(h,{children:e.jsx(R,{onClick:L})})]})}):e.jsx(e.Fragment,{})]})]})};export{le as default};
