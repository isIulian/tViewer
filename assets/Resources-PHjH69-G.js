import{t as w,c as Q,k as e,s as b,r,l as o,u as q,C as G,v as H,w as A,L as D,p as V,B as $,q as J,x as K}from"./index-BqNX3fUW.js";import{r as O}from"./resourcesService-BFqxfeSL.js";import{I as U}from"./input-B7CXuEv-.js";import{r as W}from"./resourceTypeService-DeumqlJe.js";import{T as X}from"./theme-switch-Dv3xt-Vd.js";import{I as Y}from"./IconPlus-DqrBJSq_.js";/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=w("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.372.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=w("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license @tabler/icons-react v3.2.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ee=Q("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);function se(s){let a=s.info;return e.jsx(e.Fragment,{children:e.jsx("p",{className:"truncate tracking-wid font-bold",children:a.title})})}function ae({resource:s}){return e.jsxs(e.Fragment,{children:[e.jsx(b,{to:`/resource/${s.id}`,className:"select-none xs:h-[250px] h-[216px] overflow-hidden",children:e.jsx("img",{src:s.covers[0],alt:s.title,className:"object-cover h-full w-full rounded-lg transition-all duration-300 ease-in-out hover:scale-110"})}),e.jsx("div",{className:"grid gap-1",children:e.jsx(se,{info:s})})]})}const te=({setQuery:s})=>{const[a,t]=r.useState(""),m=d=>{d.preventDefault(),a&&s({search:a})};return e.jsxs("form",{className:"text-[14px] flex flex-row items-center justify-center",onSubmit:m,children:[e.jsx(U,{type:"search",onChange:d=>t(d.target.value),placeholder:"Search...",value:a,className:"md:w-[100px] lg:w-[300px]"}),e.jsx("button",{type:"submit",className:"-ml-[32px] z-[1]",children:e.jsx(ee,{})})]})},k=({className:s,...a})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:o("mx-auto flex w-full justify-center",s),...a});k.displayName="Pagination";const R=r.forwardRef(({className:s,...a},t)=>e.jsx("ul",{ref:t,className:o("flex flex-row items-center gap-1",s),...a}));R.displayName="PaginationContent";const h=r.forwardRef(({className:s,...a},t)=>e.jsx("li",{ref:t,className:o("",s),...a}));h.displayName="PaginationItem";const f=({className:s,isActive:a,size:t="icon",...m})=>e.jsx("a",{"aria-current":a?"page":void 0,className:o(q({variant:a?"outline":"ghost",size:t}),s),...m});f.displayName="PaginationLink";const C=({className:s,...a})=>e.jsxs(f,{"aria-label":"Go to previous page",size:"default",className:o("gap-1 pl-2.5",s),...a,children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});C.displayName="PaginationPrevious";const S=({className:s,...a})=>e.jsxs(f,{"aria-label":"Go to next page",size:"default",className:o("gap-1 pr-2.5",s),...a,children:[e.jsx("span",{children:"Next"}),e.jsx(G,{className:"h-4 w-4"})]});S.displayName="PaginationNext";const L=({className:s,...a})=>e.jsxs("span",{"aria-hidden":!0,className:o("flex h-9 w-9 items-center justify-center",s),...a,children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]});L.displayName="PaginationEllipsis";const de=()=>{const[s,a]=r.useState([]),[t,m]=r.useState([]),[d,x]=H(),{type:j="movie"}=A(),u=d.get("search")||"",l=parseInt(d.get("page"),10)||1,I=()=>{x({page:l+1})},E=()=>{l>1&&x({page:l-1})};return r.useEffect(()=>{x({page:1,search:u})},[u]),r.useEffect(()=>{(async()=>{let z=await W.getTypeByName(j),y=await O.getPagedResources(z.id,u,l);const g=y.totalPages;if(g>1){const N=l,v=1;let B=N-v,F=N+v,c=[],M=K(1,g);for(const n of M)(g<6||n===1||n===g||n>=B&&n<=F)&&c.push(n);if(g>=6){let n=[];for(let p=0;p<c.length;p++){let P=c[p];n.push(P),p+1<c.length&&c[p+1]!==P+1&&n.push(-1)}c=n}a(c)}else a([]);let T=y.items;m([...T])})()},[l,u,j]),e.jsxs(D,{children:[e.jsx(V,{className:"border-b",children:e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(te,{setQuery:x}),e.jsx(X,{}),e.jsx(b,{to:"/resource-add",className:"flex ml-2",children:e.jsxs($,{size:"sm",className:"ml-auto flex h-8",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Add Resource"]})})]})}),e.jsxs(J,{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between space-y-2",children:e.jsx("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:j})}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:t==null?void 0:t.map(i=>e.jsx("div",{className:"flex flex-col xs:gap-4 gap-2 rounded-lg lg:mb-6 md:mb-5 sm:mb-4 mb-[10px]",children:e.jsx(ae,{resource:i})},i.id))}),s.length>0?e.jsx(k,{className:"pt-8",children:e.jsxs(R,{children:[e.jsx(h,{children:e.jsx(C,{onClick:E,disabled:l===1})}),s.map(i=>i===-1?e.jsx(h,{className:"hidden md:block",children:e.jsx(L,{})}):e.jsx(h,{children:e.jsx(f,{href:"#",onClick:()=>x({page:i}),isActive:i===l,children:i})},i)),e.jsx(h,{children:e.jsx(S,{onClick:I})})]})}):e.jsx(e.Fragment,{})]})]})};export{de as default};
